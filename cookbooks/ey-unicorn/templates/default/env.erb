# DO NOT MAKE MODIFICATIONS IN THIS FILE, ALWAYS MODIFY ENV.CUSTOM
# CHANGES WILL ALWAYS BE DESTROYED ON THE NEXT CHEF RUN.
#
# Friendly variables below

application="<%= @app %>"
APP_NAME=${application}
old_pidfile="/var/run/engineyard/unicorn_${application}.pid.oldbin"
pidfile="/var/run/engineyard/unicorn_${application}.pid"
shared_path="/data/${application}/shared"
current_path="/data/${application}/current"

# Deploy style changes
QUICKMODE=false # Toggling this to true enables you to 'not care' if a deploy is succesful.
hot_time_max=480
hot_restart_time=0
extra_quick_sleep=5
report_time=0

APP_USER="<%= @user %>:<%= @user %>"
APP_ENV="<%= @framework_env %>"
APP_ROOT="/data/<%= @app %>/current"
APP_TYPE="<%= @type %>"
PATH="<%= @ruby_bin_path %>:/data/<%= @app %>/current/ey_bundler_binstubs:$PATH"
UNICORN_CONF="/data/<%= @app %>/shared/config/unicorn.rb"
<% if @app_type == "rails" %>
UNICORN_EXEC="unicorn_rails"
<% else %>
UNICORN_EXEC="unicorn"
<% end %>
UNICORN_PID="/var/run/engineyard/unicorn_<%= @app %>.pid"
RUBY="<%= @ruby_bin_path %>ruby"
BUNDLER="bundle exec"
UNICORN="unicorn"
UNICORN_RAILS="unicorn_rails"
RAILS_ENV="<%= @framework_env %>";export RAILS_ENV
RACK_ENV="<%= @framework_env %>";export RACK_ENV
MERB_ENV="<%= @framework_env %>";export MERB_ENV

# Monit scrubs the environment; which makes Unicorn behave badly sometimes.
export USER="<%= @user %>"
export HOME="/home/$USER"
export LANG=en_US.utf8
export SHELL="/bin/bash"
